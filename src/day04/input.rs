pub const INPUT: &str = include_str!("../input/day04.txt");

pub type Input = Vec<Vec<usize>>;

pub fn read(input: &str) -> Input {
    input
        .trim()
        .lines()
        .map(|l| convert_line_to_vec(l))
        .collect()
}

fn convert_line_to_vec(s: &str) -> Vec<usize> {
    s.chars()
        .map(|c| convert_to_num(c))
        .collect()
}

fn convert_to_num(c: char) -> usize {
    match c {
        '.' => 0,
        '@' => 1,
        _ => panic!("{} should be . or @", c)
    }
}

#[cfg(test)]
mod test {
    use super::*;

    #[test]
    fn test_read() {
        let input = read(INPUT);

        let first = input.first().unwrap();
        assert_eq!(
            *first,
            // @@@@@@@@@@.@....@@@..@@.@@.@@@@@.@.@@@@@@@..@.@.@@@@@@@@.@@@@@.@@@@..@@@..@@..@@@@@.@@.@@@@@..@.@@@@@@@@@.....@..@@@@@@.@@@..@...@..@@@
            vec![1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,0,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,1,1,1,1,1,0,1,1,1,0,0,1,0,0,0,1,0,0,1,1,1]
        );

        let last = input.last().unwrap();
        assert_eq!(
            *last,
            // .@.@@@@@.@.@@@.@@.@@..@.@..@@@@@@@@@..@.@@@@.@@@.@...@@@.@@...@....@@@@..@@.......@@.@@..@.@@@@@..@@..@@@..@@@.@..@...@@@..@@@@.@@@@@@@
            vec![0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,0,1,1,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,0,1,1,1,0,1,0,0,0,1,1,1,0,1,1,0,0,0,1,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,0,1,0,1,1,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,0,1,0,0,1,0,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1]
        );

        assert!(true)
    }

}
